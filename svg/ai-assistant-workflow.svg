<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- 渐变定义 -->
    <linearGradient id="userGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="apiGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="aiGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dbGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cacheGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EF4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DC2626;stop-opacity:1" />
    </linearGradient>
    <!-- 箭头定义 -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280"/>
    </marker>
  </defs>
  
  <!-- 背景 -->
  <rect width="1200" height="900" fill="#f8fafc" rx="10"/>
  
  <!-- 标题 -->
  <text x="600" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">
    刀塔情书 - AI智能助手工作流程
  </text>
  <text x="600" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#64748b">
    基于DeepSeek API的多功能智能助手
  </text>
  
  <!-- 箭头定义移到主defs标签内 -->
  
  <!-- 用户输入 -->
  <rect x="50" y="120" width="200" height="80" fill="url(#userGradient)" rx="10" stroke="#047857" stroke-width="2"/>
  <text x="150" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    用户输入
  </text>
  <text x="150" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    比赛分析请求
  </text>
  <text x="150" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    学习推荐需求
  </text>
  
  <!-- 输入预处理 -->
  <rect x="300" y="120" width="200" height="80" fill="url(#apiGradient)" rx="10" stroke="#1d4ed8" stroke-width="2"/>
  <text x="400" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    输入预处理
  </text>
  <text x="400" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    意图识别
  </text>
  <text x="400" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    关键词提取
  </text>
  
  <!-- 查询类型判断 -->
  <polygon points="600,160 680,200 600,240 520,200" fill="url(#aiGradient)" stroke="#7c3aed" stroke-width="2"/>
  <text x="600" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    查询类型判断
  </text>
  <text x="600" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    路由分发
  </text>
  
  <!-- 比赛分析模块 -->
  <rect x="50" y="320" width="250" height="100" fill="url(#aiGradient)" rx="10" stroke="#7c3aed" stroke-width="2"/>
  <text x="175" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    比赛分析模块
  </text>
  <text x="175" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    历史对战数据分析
  </text>
  <text x="175" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    英雄搭配推荐
  </text>
  <text x="175" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    胜率预测算法
  </text>
  
  <!-- 学习推荐模块 -->
  <rect x="350" y="320" width="250" height="100" fill="url(#aiGradient)" rx="10" stroke="#7c3aed" stroke-width="2"/>
  <text x="475" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    学习推荐模块
  </text>
  <text x="475" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    个性化学习路径
  </text>
  <text x="475" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    技能提升建议
  </text>
  <text x="475" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    英雄专精推荐
  </text>
  
  <!-- 社区问答模块 -->
  <rect x="650" y="320" width="250" height="100" fill="url(#aiGradient)" rx="10" stroke="#7c3aed" stroke-width="2"/>
  <text x="775" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    社区问答模块
  </text>
  <text x="775" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    常见问题解答
  </text>
  <text x="775" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    策略讨论支持
  </text>
  <text x="775" y="395" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    实时建议提供
  </text>
  
  <!-- 数据查询 -->
  <rect x="50" y="480" width="250" height="80" fill="url(#dbGradient)" rx="10" stroke="#d97706" stroke-width="2"/>
  <text x="175" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    数据库查询
  </text>
  <text x="175" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    PostgreSQL主库
  </text>
  <text x="175" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    多表联合查询
  </text>
  
  <!-- 缓存检查 -->
  <rect x="350" y="480" width="250" height="80" fill="url(#cacheGradient)" rx="10" stroke="#dc2626" stroke-width="2"/>
  <text x="475" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Redis缓存检查
  </text>
  <text x="475" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    缓存命中优化
  </text>
  <text x="475" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    热点数据预加载
  </text>
  
  <!-- DeepSeek API调用 -->
  <rect x="650" y="480" width="250" height="80" fill="url(#aiGradient)" rx="10" stroke="#7c3aed" stroke-width="2"/>
  <text x="775" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    DeepSeek API调用
  </text>
  <text x="775" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    自然语言处理
  </text>
  <text x="775" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    智能推理生成
  </text>
  
  <!-- 结果生成 -->
  <rect x="300" y="620" width="200" height="80" fill="url(#apiGradient)" rx="10" stroke="#1d4ed8" stroke-width="2"/>
  <text x="400" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    结果生成
  </text>
  <text x="400" y="665" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    答案格式化
  </text>
  <text x="400" y="680" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    置信度评分
  </text>
  
  <!-- 缓存更新 -->
  <rect x="550" y="620" width="200" height="80" fill="url(#cacheGradient)" rx="10" stroke="#dc2626" stroke-width="2"/>
  <text x="650" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    缓存更新
  </text>
  <text x="650" y="665" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    结果缓存
  </text>
  <text x="650" y="680" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    过期时间设置
  </text>
  
  <!-- 用户输出 -->
  <rect x="50" y="760" width="200" height="80" fill="url(#userGradient)" rx="10" stroke="#047857" stroke-width="2"/>
  <text x="150" y="785" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    用户输出
  </text>
  <text x="150" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    分析结果展示
  </text>
  <text x="150" y="820" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    推荐列表呈现
  </text>
  
  <!-- 反馈收集 -->
  <rect x="300" y="760" width="200" height="80" fill="url(#apiGradient)" rx="10" stroke="#1d4ed8" stroke-width="2"/>
  <text x="400" y="785" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    反馈收集
  </text>
  <text x="400" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    用户满意度
  </text>
  <text x="400" y="820" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    改进建议记录
  </text>
  
  <!-- 模型优化 -->
  <rect x="550" y="760" width="200" height="80" fill="url(#aiGradient)" rx="10" stroke="#7c3aed" stroke-width="2"/>
  <text x="650" y="785" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    模型优化
  </text>
  <text x="650" y="805" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    持续学习
  </text>
  <text x="650" y="820" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    准确率提升
  </text>
  
  <!-- 连接线 -->
  <!-- 主流程 -->
  <line x1="250" y1="160" x2="300" y2="160" stroke="#6b7280" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="500" y1="160" x2="520" y2="200" stroke="#6b7280" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="240" x2="175" y2="320" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="240" x2="475" y2="320" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="240" x2="775" y2="320" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="175" y1="420" x2="175" y2="480" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="475" y1="420" x2="475" y2="480" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="775" y1="420" x2="775" y2="480" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="175" y1="560" x2="400" y2="620" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="475" y1="560" x2="650" y2="620" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="775" y1="560" x2="775" y2="620" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="700" x2="150" y2="760" stroke="#6b7280" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="150" y1="840" x2="400" y2="840" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="840" x2="650" y2="840" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="650" y1="840" x2="650" y2="800" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 说明文字 -->
  <rect x="50" y="880" width="1100" height="100" fill="#f9fafb" stroke="#d1d5db" stroke-width="1" rx="10"/>
  <text x="600" y="900" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#374151">
    工作流程说明
  </text>
  <text x="80" y="920" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">
    • 平均响应时间：500ms-2s（缓存命中 < 200ms，DeepSeek API调用 1-3s）
  </text>
  <text x="80" y="935" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">
    • 支持并发处理：最多50个同时请求，Redis缓存可承载80%的查询请求
  </text>
  <text x="80" y="950" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">
    • 准确率：比赛分析85%+，学习推荐80%+，社区问答90%+（基于用户反馈统计）
  </text>
  <text x="80" y="965" font-family="Arial, sans-serif" font-size="11" fill="#6b7280">
    • 反馈循环：用户评分低于3星时自动触发模型优化，每周更新一次算法参数
  </text>
  
  <text x="600" y="1000" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9ca3af">
    刀塔情书 - AI智能助手 ❤️ 基于DeepSeek API构建
  </text>
</svg>