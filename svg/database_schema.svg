<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1100" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; fill: #34495e; }
      .table-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #2c3e50; }
      .field-name { font-family: Arial, sans-serif; font-size: 11px; fill: #2c3e50; font-weight: bold; }
      .field-type { font-family: Arial, sans-serif; font-size: 10px; fill: #7f8c8d; }
      .pk-field { font-family: Arial, sans-serif; font-size: 11px; fill: #e74c3c; font-weight: bold; }
      .fk-field { font-family: Arial, sans-serif; font-size: 11px; fill: #3498db; font-weight: bold; }
      .relation-line { stroke: #3498db; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .core-table { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .user-table { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .content-table { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .system-table { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
      .meta-table { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
    </marker>
  </defs>
  
  <!-- 背景 -->
  <rect width="1400" height="1100" fill="#ecf0f1"/>
  
  <!-- 标题 -->
  <text x="700" y="30" text-anchor="middle" class="title">数据库关系模型图</text>
  <text x="700" y="55" text-anchor="middle" class="subtitle">PostgreSQL 数据库设计 - 核心表结构与关系</text>
  
  <!-- 用户相关表 -->
  <text x="50" y="90" class="table-title">用户管理模块</text>
  
  <!-- Users表 -->
  <rect x="50" y="100" width="200" height="220" class="user-table" rx="8"/>
  <text x="150" y="120" text-anchor="middle" class="table-title" fill="white">users</text>
  <line x1="60" y1="125" x2="240" y2="125" stroke="white" stroke-width="1"/>
  
  <text x="60" y="140" class="pk-field" fill="white">id</text>
  <text x="120" y="140" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="60" y="155" class="field-name" fill="white">username</text>
  <text x="120" y="155" class="field-type" fill="white">VARCHAR(50)</text>
  
  <text x="60" y="170" class="field-name" fill="white">email</text>
  <text x="120" y="170" class="field-type" fill="white">VARCHAR(255)</text>
  
  <text x="60" y="185" class="field-name" fill="white">password_hash</text>
  <text x="140" y="185" class="field-type" fill="white">VARCHAR(255)</text>
  
  <text x="60" y="200" class="field-name" fill="white">role</text>
  <text x="100" y="200" class="field-type" fill="white">ENUM</text>
  
  <text x="60" y="215" class="field-name" fill="white">tier</text>
  <text x="100" y="215" class="field-type" fill="white">ENUM</text>
  
  <text x="60" y="230" class="field-name" fill="white">steam_id</text>
  <text x="120" y="230" class="field-type" fill="white">VARCHAR(20)</text>
  
  <text x="60" y="245" class="field-name" fill="white">verified</text>
  <text x="110" y="245" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="60" y="260" class="field-name" fill="white">created_at</text>
  <text x="120" y="260" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="60" y="275" class="field-name" fill="white">updated_at</text>
  <text x="120" y="275" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="60" y="290" class="field-name" fill="white">last_active</text>
  <text x="125" y="290" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="60" y="305" class="field-name" fill="white">avatar_url</text>
  <text x="120" y="305" class="field-type" fill="white">VARCHAR(500)</text>
  
  <!-- UserSessions表 -->
  <rect x="270" y="100" width="180" height="160" class="user-table" rx="8"/>
  <text x="360" y="120" text-anchor="middle" class="table-title" fill="white">user_sessions</text>
  <line x1="280" y1="125" x2="440" y2="125" stroke="white" stroke-width="1"/>
  
  <text x="280" y="140" class="pk-field" fill="white">id</text>
  <text x="320" y="140" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="280" y="155" class="fk-field" fill="white">user_id</text>
  <text x="330" y="155" class="field-type" fill="white">INT FK</text>
  
  <text x="280" y="170" class="field-name" fill="white">token_hash</text>
  <text x="345" y="170" class="field-type" fill="white">VARCHAR(255)</text>
  
  <text x="280" y="185" class="field-name" fill="white">expires_at</text>
  <text x="345" y="185" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="280" y="200" class="field-name" fill="white">ip_address</text>
  <text x="340" y="200" class="field-type" fill="white">INET</text>
  
  <text x="280" y="215" class="field-name" fill="white">user_agent</text>
  <text x="345" y="215" class="field-type" fill="white">TEXT</text>
  
  <text x="280" y="230" class="field-name" fill="white">created_at</text>
  <text x="340" y="230" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="280" y="245" class="field-name" fill="white">last_used</text>
  <text x="335" y="245" class="field-type" fill="white">TIMESTAMP</text>
  
  <!-- 比赛核心表 -->
  <text x="480" y="90" class="table-title">比赛数据模块</text>
  
  <!-- Matches表 -->
  <rect x="480" y="100" width="220" height="280" class="core-table" rx="8"/>
  <text x="590" y="120" text-anchor="middle" class="table-title" fill="white">matches</text>
  <line x1="490" y1="125" x2="690" y2="125" stroke="white" stroke-width="1"/>
  
  <text x="490" y="140" class="pk-field" fill="white">id</text>
  <text x="520" y="140" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="490" y="155" class="field-name" fill="white">match_id</text>
  <text x="550" y="155" class="field-type" fill="white">BIGINT UNIQUE</text>
  
  <text x="490" y="170" class="fk-field" fill="white">league_id</text>
  <text x="545" y="170" class="field-type" fill="white">INT FK</text>
  
  <text x="490" y="185" class="field-name" fill="white">start_time</text>
  <text x="550" y="185" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="490" y="200" class="field-name" fill="white">duration</text>
  <text x="540" y="200" class="field-type" fill="white">INTEGER</text>
  
  <text x="490" y="215" class="field-name" fill="white">status</text>
  <text x="530" y="215" class="field-type" fill="white">ENUM</text>
  
  <text x="490" y="230" class="field-name" fill="white">game_mode</text>
  <text x="550" y="230" class="field-type" fill="white">INTEGER</text>
  
  <text x="490" y="245" class="field-name" fill="white">radiant_win</text>
  <text x="555" y="245" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="490" y="260" class="field-name" fill="white">radiant_score</text>
  <text x="565" y="260" class="field-type" fill="white">INTEGER</text>
  
  <text x="490" y="275" class="field-name" fill="white">dire_score</text>
  <text x="545" y="275" class="field-type" fill="white">INTEGER</text>
  
  <text x="490" y="290" class="field-name" fill="white">first_blood_time</text>
  <text x="575" y="290" class="field-type" fill="white">INTEGER</text>
  
  <text x="490" y="305" class="field-name" fill="white">data_sources</text>
  <text x="560" y="305" class="field-type" fill="white">JSONB</text>
  
  <text x="490" y="320" class="field-name" fill="white">raw_data</text>
  <text x="545" y="320" class="field-type" fill="white">JSONB</text>
  
  <text x="490" y="335" class="field-name" fill="white">created_at</text>
  <text x="550" y="335" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="490" y="350" class="field-name" fill="white">updated_at</text>
  <text x="550" y="350" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="490" y="365" class="field-name" fill="white">replay_url</text>
  <text x="550" y="365" class="field-type" fill="white">VARCHAR(500)</text>
  
  <!-- Teams表 -->
  <rect x="720" y="100" width="180" height="200" class="core-table" rx="8"/>
  <text x="810" y="120" text-anchor="middle" class="table-title" fill="white">teams</text>
  <line x1="730" y1="125" x2="890" y2="125" stroke="white" stroke-width="1"/>
  
  <text x="730" y="140" class="pk-field" fill="white">id</text>
  <text x="760" y="140" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="730" y="155" class="field-name" fill="white">team_id</text>
  <text x="780" y="155" class="field-type" fill="white">INTEGER</text>
  
  <text x="730" y="170" class="field-name" fill="white">name</text>
  <text x="765" y="170" class="field-type" fill="white">VARCHAR(100)</text>
  
  <text x="730" y="185" class="field-name" fill="white">tag</text>
  <text x="760" y="185" class="field-type" fill="white">VARCHAR(10)</text>
  
  <text x="730" y="200" class="field-name" fill="white">logo_url</text>
  <text x="780" y="200" class="field-type" fill="white">VARCHAR(500)</text>
  
  <text x="730" y="215" class="field-name" fill="white">region</text>
  <text x="770" y="215" class="field-type" fill="white">VARCHAR(50)</text>
  
  <text x="730" y="230" class="field-name" fill="white">rating</text>
  <text x="770" y="230" class="field-type" fill="white">INTEGER</text>
  
  <text x="730" y="245" class="field-name" fill="white">wins</text>
  <text x="765" y="245" class="field-type" fill="white">INTEGER</text>
  
  <text x="730" y="260" class="field-name" fill="white">losses</text>
  <text x="770" y="260" class="field-type" fill="white">INTEGER</text>
  
  <text x="730" y="275" class="field-name" fill="white">created_at</text>
  <text x="785" y="275" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="730" y="290" class="field-name" fill="white">updated_at</text>
  <text x="785" y="290" class="field-type" fill="white">TIMESTAMP</text>
  
  <!-- Players表 -->
  <rect x="920" y="100" width="180" height="240" class="core-table" rx="8"/>
  <text x="1010" y="120" text-anchor="middle" class="table-title" fill="white">players</text>
  <line x1="930" y1="125" x2="1090" y2="125" stroke="white" stroke-width="1"/>
  
  <text x="930" y="140" class="pk-field" fill="white">id</text>
  <text x="960" y="140" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="930" y="155" class="field-name" fill="white">account_id</text>
  <text x="990" y="155" class="field-type" fill="white">BIGINT</text>
  
  <text x="930" y="170" class="field-name" fill="white">steam_id</text>
  <text x="980" y="170" class="field-type" fill="white">VARCHAR(20)</text>
  
  <text x="930" y="185" class="field-name" fill="white">name</text>
  <text x="965" y="185" class="field-type" fill="white">VARCHAR(100)</text>
  
  <text x="930" y="200" class="field-name" fill="white">real_name</text>
  <text x="985" y="200" class="field-type" fill="white">VARCHAR(100)</text>
  
  <text x="930" y="215" class="fk-field" fill="white">team_id</text>
  <text x="975" y="215" class="field-type" fill="white">INT FK</text>
  
  <text x="930" y="230" class="field-name" fill="white">country_code</text>
  <text x="1000" y="230" class="field-type" fill="white">VARCHAR(3)</text>
  
  <text x="930" y="245" class="field-name" fill="white">avatar_url</text>
  <text x="985" y="245" class="field-type" fill="white">VARCHAR(500)</text>
  
  <text x="930" y="260" class="field-name" fill="white">mmr_estimate</text>
  <text x="1000" y="260" class="field-type" fill="white">INTEGER</text>
  
  <text x="930" y="275" class="field-name" fill="white">is_pro</text>
  <text x="970" y="275" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="930" y="290" class="field-name" fill="white">created_at</text>
  <text x="985" y="290" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="930" y="305" class="field-name" fill="white">updated_at</text>
  <text x="985" y="305" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="930" y="320" class="field-name" fill="white">last_match_time</text>
  <text x="1015" y="320" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="930" y="335" class="field-name" fill="white">total_matches</text>
  <text x="1000" y="335" class="field-type" fill="white">INTEGER</text>
  
  <!-- Leagues表 -->
  <rect x="1120" y="100" width="180" height="180" class="core-table" rx="8"/>
  <text x="1210" y="120" text-anchor="middle" class="table-title" fill="white">leagues</text>
  <line x1="1130" y1="125" x2="1290" y2="125" stroke="white" stroke-width="1"/>
  
  <text x="1130" y="140" class="pk-field" fill="white">id</text>
  <text x="1160" y="140" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="1130" y="155" class="field-name" fill="white">league_id</text>
  <text x="1185" y="155" class="field-type" fill="white">INTEGER</text>
  
  <text x="1130" y="170" class="field-name" fill="white">name</text>
  <text x="1165" y="170" class="field-type" fill="white">VARCHAR(200)</text>
  
  <text x="1130" y="185" class="field-name" fill="white">tier</text>
  <text x="1160" y="185" class="field-type" fill="white">ENUM</text>
  
  <text x="1130" y="200" class="field-name" fill="white">banner</text>
  <text x="1170" y="200" class="field-type" fill="white">VARCHAR(500)</text>
  
  <text x="1130" y="215" class="field-name" fill="white">start_date</text>
  <text x="1185" y="215" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="1130" y="230" class="field-name" fill="white">end_date</text>
  <text x="1180" y="230" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="1130" y="245" class="field-name" fill="white">prize_pool</text>
  <text x="1185" y="245" class="field-type" fill="white">INTEGER</text>
  
  <text x="1130" y="260" class="field-name" fill="white">created_at</text>
  <text x="1185" y="260" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="1130" y="275" class="field-name" fill="white">updated_at</text>
  <text x="1185" y="275" class="field-type" fill="white">TIMESTAMP</text>
  
  <!-- 比赛详细表 -->
  <text x="50" y="410" class="table-title">比赛详细数据</text>
  
  <!-- MatchPlayers表 -->
  <rect x="50" y="420" width="220" height="300" class="core-table" rx="8"/>
  <text x="160" y="440" text-anchor="middle" class="table-title" fill="white">match_players</text>
  <line x1="60" y1="445" x2="260" y2="445" stroke="white" stroke-width="1"/>
  
  <text x="60" y="460" class="pk-field" fill="white">id</text>
  <text x="90" y="460" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="60" y="475" class="fk-field" fill="white">match_id</text>
  <text x="115" y="475" class="field-type" fill="white">INT FK</text>
  
  <text x="60" y="490" class="fk-field" fill="white">player_id</text>
  <text x="115" y="490" class="field-type" fill="white">INT FK</text>
  
  <text x="60" y="505" class="field-name" fill="white">slot</text>
  <text x="95" y="505" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="520" class="field-name" fill="white">hero_id</text>
  <text x="110" y="520" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="535" class="field-name" fill="white">kills</text>
  <text x="95" y="535" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="550" class="field-name" fill="white">deaths</text>
  <text x="105" y="550" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="565" class="field-name" fill="white">assists</text>
  <text x="105" y="565" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="580" class="field-name" fill="white">last_hits</text>
  <text x="115" y="580" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="595" class="field-name" fill="white">denies</text>
  <text x="105" y="595" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="610" class="field-name" fill="white">gold_per_min</text>
  <text x="125" y="610" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="625" class="field-name" fill="white">xp_per_min</text>
  <text x="120" y="625" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="640" class="field-name" fill="white">net_worth</text>
  <text x="115" y="640" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="655" class="field-name" fill="white">hero_damage</text>
  <text x="125" y="655" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="670" class="field-name" fill="white">hero_healing</text>
  <text x="125" y="670" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="685" class="field-name" fill="white">tower_damage</text>
  <text x="130" y="685" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="700" class="field-name" fill="white">items</text>
  <text x="100" y="700" class="field-type" fill="white">JSONB</text>
  
  <text x="60" y="715" class="field-name" fill="white">ability_builds</text>
  <text x="130" y="715" class="field-type" fill="white">JSONB</text>
  
  <!-- MatchDrafts表 -->
  <rect x="290" y="420" width="200" height="180" class="core-table" rx="8"/>
  <text x="390" y="440" text-anchor="middle" class="table-title" fill="white">match_drafts</text>
  <line x1="300" y1="445" x2="480" y2="445" stroke="white" stroke-width="1"/>
  
  <text x="300" y="460" class="pk-field" fill="white">id</text>
  <text x="330" y="460" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="300" y="475" class="fk-field" fill="white">match_id</text>
  <text x="355" y="475" class="field-type" fill="white">INT FK</text>
  
  <text x="300" y="490" class="field-name" fill="white">is_pick</text>
  <text x="345" y="490" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="300" y="505" class="field-name" fill="white">hero_id</text>
  <text x="350" y="505" class="field-type" fill="white">INTEGER</text>
  
  <text x="300" y="520" class="field-name" fill="white">team</text>
  <text x="335" y="520" class="field-type" fill="white">INTEGER</text>
  
  <text x="300" y="535" class="field-name" fill="white">order</text>
  <text x="335" y="535" class="field-type" fill="white">INTEGER</text>
  
  <text x="300" y="550" class="field-name" fill="white">active_team</text>
  <text x="365" y="550" class="field-type" fill="white">INTEGER</text>
  
  <text x="300" y="565" class="field-name" fill="white">created_at</text>
  <text x="360" y="565" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="300" y="580" class="field-name" fill="white">updated_at</text>
  <text x="360" y="580" class="field-type" fill="white">TIMESTAMP</text>
  
  <!-- MatchAnalyses表 -->
  <rect x="510" y="420" width="200" height="200" class="system-table" rx="8"/>
  <text x="610" y="440" text-anchor="middle" class="table-title" fill="white">match_analyses</text>
  <line x1="520" y1="445" x2="700" y2="445" stroke="white" stroke-width="1"/>
  
  <text x="520" y="460" class="pk-field" fill="white">id</text>
  <text x="550" y="460" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="520" y="475" class="fk-field" fill="white">match_id</text>
  <text x="575" y="475" class="field-type" fill="white">INT FK</text>
  
  <text x="520" y="490" class="field-name" fill="white">ai_analysis</text>
  <text x="580" y="490" class="field-type" fill="white">JSONB</text>
  
  <text x="520" y="505" class="field-name" fill="white">expert_rating</text>
  <text x="590" y="505" class="field-type" fill="white">DECIMAL</text>
  
  <text x="520" y="520" class="field-name" fill="white">complexity_score</text>
  <text x="600" y="520" class="field-type" fill="white">INTEGER</text>
  
  <text x="520" y="535" class="field-name" fill="white">highlight_moments</text>
  <text x="610" y="535" class="field-type" fill="white">JSONB</text>
  
  <text x="520" y="550" class="field-name" fill="white">learning_points</text>
  <text x="600" y="550" class="field-type" fill="white">JSONB</text>
  
  <text x="520" y="565" class="field-name" fill="white">created_at</text>
  <text x="580" y="565" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="520" y="580" class="field-name" fill="white">updated_at</text>
  <text x="580" y="580" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="520" y="595" class="field-name" fill="white">analysis_version</text>
  <text x="610" y="595" class="field-type" fill="white">VARCHAR(20)</text>
  
  <text x="520" y="610" class="field-name" fill="white">dem_json_url</text>
  <text x="585" y="610" class="field-type" fill="white">VARCHAR(500)</text>
  
  <!-- 内容管理表 -->
  <text x="730" y="410" class="table-title">内容管理模块</text>
  
  <!-- Discussions表 -->
  <rect x="730" y="420" width="200" height="240" class="content-table" rx="8"/>
  <text x="830" y="440" text-anchor="middle" class="table-title" fill="white">discussions</text>
  <line x1="740" y1="445" x2="920" y2="445" stroke="white" stroke-width="1"/>
  
  <text x="740" y="460" class="pk-field" fill="white">id</text>
  <text x="770" y="460" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="740" y="475" class="fk-field" fill="white">author_id</text>
  <text x="790" y="475" class="field-type" fill="white">INT FK</text>
  
  <text x="740" y="490" class="fk-field" fill="white">match_id</text>
  <text x="790" y="490" class="field-type" fill="white">INT FK</text>
  
  <text x="740" y="505" class="field-name" fill="white">title</text>
  <text x="770" y="505" class="field-type" fill="white">VARCHAR(200)</text>
  
  <text x="740" y="520" class="field-name" fill="white">content</text>
  <text x="780" y="520" class="field-type" fill="white">TEXT</text>
  
  <text x="740" y="535" class="field-name" fill="white">category</text>
  <text x="785" y="535" class="field-type" fill="white">ENUM</text>
  
  <text x="740" y="550" class="field-name" fill="white">status</text>
  <text x="775" y="550" class="field-type" fill="white">ENUM</text>
  
  <text x="740" y="565" class="field-name" fill="white">likes_count</text>
  <text x="805" y="565" class="field-type" fill="white">INTEGER</text>
  
  <text x="740" y="580" class="field-name" fill="white">comments_count</text>
  <text x="820" y="580" class="field-type" fill="white">INTEGER</text>
  
  <text x="740" y="595" class="field-name" fill="white">views_count</text>
  <text x="805" y="595" class="field-type" fill="white">INTEGER</text>
  
  <text x="740" y="610" class="field-name" fill="white">created_at</text>
  <text x="800" y="610" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="740" y="625" class="field-name" fill="white">updated_at</text>
  <text x="800" y="625" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="740" y="640" class="field-name" fill="white">is_featured</text>
  <text x="800" y="640" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="740" y="655" class="field-name" fill="white">tags</text>
  <text x="770" y="655" class="field-type" fill="white">JSONB</text>
  
  <!-- Comments表 -->
  <rect x="950" y="420" width="180" height="200" class="content-table" rx="8"/>
  <text x="1040" y="440" text-anchor="middle" class="table-title" fill="white">comments</text>
  <line x1="960" y1="445" x2="1120" y2="445" stroke="white" stroke-width="1"/>
  
  <text x="960" y="460" class="pk-field" fill="white">id</text>
  <text x="990" y="460" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="960" y="475" class="fk-field" fill="white">discussion_id</text>
  <text x="1030" y="475" class="field-type" fill="white">INT FK</text>
  
  <text x="960" y="490" class="fk-field" fill="white">author_id</text>
  <text x="1010" y="490" class="field-type" fill="white">INT FK</text>
  
  <text x="960" y="505" class="fk-field" fill="white">parent_id</text>
  <text x="1010" y="505" class="field-type" fill="white">INT FK</text>
  
  <text x="960" y="520" class="field-name" fill="white">content</text>
  <text x="1000" y="520" class="field-type" fill="white">TEXT</text>
  
  <text x="960" y="535" class="field-name" fill="white">likes_count</text>
  <text x="1025" y="535" class="field-type" fill="white">INTEGER</text>
  
  <text x="960" y="550" class="field-name" fill="white">status</text>
  <text x="995" y="550" class="field-type" fill="white">ENUM</text>
  
  <text x="960" y="565" class="field-name" fill="white">created_at</text>
  <text x="1020" y="565" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="960" y="580" class="field-name" fill="white">updated_at</text>
  <text x="1020" y="580" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="960" y="595" class="field-name" fill="white">is_expert</text>
  <text x="1010" y="595" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="960" y="610" class="field-name" fill="white">depth_level</text>
  <text x="1020" y="610" class="field-type" fill="white">INTEGER</text>
  
  <!-- Notifications表 -->
  <rect x="1150" y="420" width="180" height="180" class="system-table" rx="8"/>
  <text x="1240" y="440" text-anchor="middle" class="table-title" fill="white">notifications</text>
  <line x1="1160" y1="445" x2="1320" y2="445" stroke="white" stroke-width="1"/>
  
  <text x="1160" y="460" class="pk-field" fill="white">id</text>
  <text x="1190" y="460" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="1160" y="475" class="fk-field" fill="white">user_id</text>
  <text x="1205" y="475" class="field-type" fill="white">INT FK</text>
  
  <text x="1160" y="490" class="field-name" fill="white">type</text>
  <text x="1190" y="490" class="field-type" fill="white">ENUM</text>
  
  <text x="1160" y="505" class="field-name" fill="white">title</text>
  <text x="1190" y="505" class="field-type" fill="white">VARCHAR(200)</text>
  
  <text x="1160" y="520" class="field-name" fill="white">content</text>
  <text x="1200" y="520" class="field-type" fill="white">TEXT</text>
  
  <text x="1160" y="535" class="field-name" fill="white">read_at</text>
  <text x="1205" y="535" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="1160" y="550" class="field-name" fill="white">data</text>
  <text x="1190" y="550" class="field-type" fill="white">JSONB</text>
  
  <text x="1160" y="565" class="field-name" fill="white">created_at</text>
  <text x="1220" y="565" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="1160" y="580" class="field-name" fill="white">expires_at</text>
  <text x="1215" y="580" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="1160" y="595" class="field-name" fill="white">priority</text>
  <text x="1205" y="595" class="field-type" fill="white">INTEGER</text>
  
  <!-- 游戏元数据表 -->
  <text x="50" y="750" class="table-title">游戏元数据</text>
  
  <!-- Heroes表 -->
  <rect x="50" y="760" width="180" height="160" class="meta-table" rx="8"/>
  <text x="140" y="780" text-anchor="middle" class="table-title" fill="white">heroes</text>
  <line x1="60" y1="785" x2="220" y2="785" stroke="white" stroke-width="1"/>
  
  <text x="60" y="800" class="pk-field" fill="white">id</text>
  <text x="90" y="800" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="60" y="815" class="field-name" fill="white">hero_id</text>
  <text x="110" y="815" class="field-type" fill="white">INTEGER</text>
  
  <text x="60" y="830" class="field-name" fill="white">name</text>
  <text x="95" y="830" class="field-type" fill="white">VARCHAR(50)</text>
  
  <text x="60" y="845" class="field-name" fill="white">localized_name</text>
  <text x="140" y="845" class="field-type" fill="white">VARCHAR(100)</text>
  
  <text x="60" y="860" class="field-name" fill="white">primary_attr</text>
  <text x="125" y="860" class="field-type" fill="white">ENUM</text>
  
  <text x="60" y="875" class="field-name" fill="white">attack_type</text>
  <text x="120" y="875" class="field-type" fill="white">ENUM</text>
  
  <text x="60" y="890" class="field-name" fill="white">roles</text>
  <text x="95" y="890" class="field-type" fill="white">JSONB</text>
  
  <text x="60" y="905" class="field-name" fill="white">icon_url</text>
  <text x="110" y="905" class="field-type" fill="white">VARCHAR(500)</text>
  
  <!-- Items表 -->
  <rect x="250" y="760" width="180" height="160" class="meta-table" rx="8"/>
  <text x="340" y="780" text-anchor="middle" class="table-title" fill="white">items</text>
  <line x1="260" y1="785" x2="420" y2="785" stroke="white" stroke-width="1"/>
  
  <text x="260" y="800" class="pk-field" fill="white">id</text>
  <text x="290" y="800" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="260" y="815" class="field-name" fill="white">item_id</text>
  <text x="305" y="815" class="field-type" fill="white">INTEGER</text>
  
  <text x="260" y="830" class="field-name" fill="white">name</text>
  <text x="295" y="830" class="field-type" fill="white">VARCHAR(50)</text>
  
  <text x="260" y="845" class="field-name" fill="white">localized_name</text>
  <text x="340" y="845" class="field-type" fill="white">VARCHAR(100)</text>
  
  <text x="260" y="860" class="field-name" fill="white">cost</text>
  <text x="290" y="860" class="field-type" fill="white">INTEGER</text>
  
  <text x="260" y="875" class="field-name" fill="white">secret_shop</text>
  <text x="330" y="875" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="260" y="890" class="field-name" fill="white">side_shop</text>
  <text x="315" y="890" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="260" y="905" class="field-name" fill="white">icon_url</text>
  <text x="310" y="905" class="field-type" fill="white">VARCHAR(500)</text>
  
  <!-- 学习系统表 -->
  <text x="450" y="750" class="table-title">学习系统</text>
  
  <!-- LearningCourses表 -->
  <rect x="450" y="760" width="200" height="200" class="system-table" rx="8"/>
  <text x="550" y="780" text-anchor="middle" class="table-title" fill="white">learning_courses</text>
  <line x1="460" y1="785" x2="640" y2="785" stroke="white" stroke-width="1"/>
  
  <text x="460" y="800" class="pk-field" fill="white">id</text>
  <text x="490" y="800" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="460" y="815" class="field-name" fill="white">title</text>
  <text x="490" y="815" class="field-type" fill="white">VARCHAR(200)</text>
  
  <text x="460" y="830" class="field-name" fill="white">description</text>
  <text x="520" y="830" class="field-type" fill="white">TEXT</text>
  
  <text x="460" y="845" class="field-name" fill="white">difficulty_level</text>
  <text x="540" y="845" class="field-type" fill="white">ENUM</text>
  
  <text x="460" y="860" class="field-name" fill="white">category</text>
  <text x="505" y="860" class="field-type" fill="white">ENUM</text>
  
  <text x="460" y="875" class="field-name" fill="white">estimated_time</text>
  <text x="540" y="875" class="field-type" fill="white">INTEGER</text>
  
  <text x="460" y="890" class="field-name" fill="white">prerequisites</text>
  <text x="525" y="890" class="field-type" fill="white">JSONB</text>
  
  <text x="460" y="905" class="field-name" fill="white">content</text>
  <text x="500" y="905" class="field-type" fill="white">JSONB</text>
  
  <text x="460" y="920" class="field-name" fill="white">is_published</text>
  <text x="525" y="920" class="field-type" fill="white">BOOLEAN</text>
  
  <text x="460" y="935" class="field-name" fill="white">created_at</text>
  <text x="520" y="935" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="460" y="950" class="field-name" fill="white">updated_at</text>
  <text x="520" y="950" class="field-type" fill="white">TIMESTAMP</text>
  
  <!-- UserProgress表 -->
  <rect x="670" y="760" width="200" height="180" class="system-table" rx="8"/>
  <text x="770" y="780" text-anchor="middle" class="table-title" fill="white">user_progress</text>
  <line x1="680" y1="785" x2="860" y2="785" stroke="white" stroke-width="1"/>
  
  <text x="680" y="800" class="pk-field" fill="white">id</text>
  <text x="710" y="800" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="680" y="815" class="fk-field" fill="white">user_id</text>
  <text x="725" y="815" class="field-type" fill="white">INT FK</text>
  
  <text x="680" y="830" class="fk-field" fill="white">course_id</text>
  <text x="730" y="830" class="field-type" fill="white">INT FK</text>
  
  <text x="680" y="845" class="field-name" fill="white">progress_percent</text>
  <text x="765" y="845" class="field-type" fill="white">DECIMAL</text>
  
  <text x="680" y="860" class="field-name" fill="white">completed_lessons</text>
  <text x="770" y="860" class="field-type" fill="white">JSONB</text>
  
  <text x="680" y="875" class="field-name" fill="white">quiz_scores</text>
  <text x="745" y="875" class="field-type" fill="white">JSONB</text>
  
  <text x="680" y="890" class="field-name" fill="white">started_at</text>
  <text x="740" y="890" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="680" y="905" class="field-name" fill="white">completed_at</text>
  <text x="750" y="905" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="680" y="920" class="field-name" fill="white">last_accessed</text>
  <text x="755" y="920" class="field-type" fill="white">TIMESTAMP</text>
  
  <text x="680" y="935" class="field-name" fill="white">achievements</text>
  <text x="745" y="935" class="field-type" fill="white">JSONB</text>
  
  <!-- 审计日志表 -->
  <rect x="890" y="760" width="200" height="160" class="system-table" rx="8"/>
  <text x="990" y="780" text-anchor="middle" class="table-title" fill="white">audit_logs</text>
  <line x1="900" y1="785" x2="1080" y2="785" stroke="white" stroke-width="1"/>
  
  <text x="900" y="800" class="pk-field" fill="white">id</text>
  <text x="930" y="800" class="field-type" fill="white">SERIAL PK</text>
  
  <text x="900" y="815" class="fk-field" fill="white">user_id</text>
  <text x="945" y="815" class="field-type" fill="white">INT FK</text>
  
  <text x="900" y="830" class="field-name" fill="white">action</text>
  <text x="940" y="830" class="field-type" fill="white">VARCHAR(50)</text>
  
  <text x="900" y="845" class="field-name" fill="white">resource_type</text>
  <text x="975" y="845" class="field-type" fill="white">VARCHAR(50)</text>
  
  <text x="900" y="860" class="field-name" fill="white">resource_id</text>
  <text x="960" y="860" class="field-type" fill="white">INTEGER</text>
  
  <text x="900" y="875" class="field-name" fill="white">ip_address</text>
  <text x="960" y="875" class="field-type" fill="white">INET</text>
  
  <text x="900" y="890" class="field-name" fill="white">user_agent</text>
  <text x="960" y="890" class="field-type" fill="white">TEXT</text>
  
  <text x="900" y="905" class="field-name" fill="white">created_at</text>
  <text x="960" y="905" class="field-type" fill="white">TIMESTAMP</text>
  
  <!-- 关系连接线 -->
  <!-- Users -> UserSessions -->
  <line x1="250" y1="200" x2="270" y2="180" class="relation-line"/>
  
  <!-- Users -> Discussions -->
  <line x1="250" y1="250" x2="730" y2="500" class="relation-line"/>
  
  <!-- Users -> Comments -->
  <line x1="250" y1="260" x2="950" y2="520" class="relation-line"/>
  
  <!-- Users -> Notifications -->
  <line x1="250" y1="270" x2="1150" y2="500" class="relation-line"/>
  
  <!-- Users -> UserProgress -->
  <line x1="250" y1="280" x2="670" y2="830" class="relation-line"/>
  
  <!-- Users -> AuditLogs -->
  <line x1="250" y1="290" x2="890" y2="830" class="relation-line"/>
  
  <!-- Matches -> MatchPlayers -->
  <line x1="480" y1="300" x2="270" y2="500" class="relation-line"/>
  
  <!-- Matches -> MatchDrafts -->
  <line x1="480" y1="310" x2="390" y2="420" class="relation-line"/>
  
  <!-- Matches -> MatchAnalyses -->
  <line x1="700" y1="300" x2="510" y2="500" class="relation-line"/>
  
  <!-- Matches -> Discussions -->
  <line x1="700" y1="320" x2="730" y2="490" class="relation-line"/>
  
  <!-- Players -> MatchPlayers -->
  <line x1="920" y1="300" x2="270" y2="490" class="relation-line"/>
  
  <!-- Players -> Teams -->
  <line x1="920" y1="220" x2="900" y2="220" class="relation-line"/>
  
  <!-- Leagues -> Matches -->
  <line x1="1120" y1="200" x2="700" y2="200" class="relation-line"/>
  
  <!-- Discussions -> Comments -->
  <line x1="930" y1="500" x2="950" y2="500" class="relation-line"/>
  
  <!-- LearningCourses -> UserProgress -->
  <line x1="650" y1="830" x2="670" y2="830" class="relation-line"/>
  
  <!-- 图例 -->
  <rect x="50" y="980" width="1200" height="100" fill="white" stroke="#bdc3c7" stroke-width="1" rx="5"/>
  <text x="70" y="1000" class="table-title">数据库设计说明</text>
  
  <text x="70" y="1020" class="field-name">核心表 (蓝色):</text>
  <text x="160" y="1020" class="endpoint-text">matches, teams, players, leagues - 比赛核心数据</text>
  
  <text x="70" y="1035" class="field-name">用户表 (红色):</text>
  <text x="160" y="1035" class="endpoint-text">users, user_sessions - 用户认证和会话管理</text>
  
  <text x="70" y="1050" class="field-name">内容表 (橙色):</text>
  <text x="160" y="1050" class="endpoint-text">discussions, comments - 社区内容和讨论</text>
  
  <text x="70" y="1065" class="field-name">系统表 (绿色):</text>
  <text x="160" y="1065" class="endpoint-text">notifications, learning_courses, user_progress, audit_logs - 系统功能</text>
  
  <text x="600" y="1020" class="field-name">元数据表 (紫色):</text>
  <text x="710" y="1020" class="endpoint-text">heroes, items - 游戏静态数据</text>
  
  <text x="600" y="1035" class="field-name">索引策略:</text>
  <text x="680" y="1035" class="endpoint-text">match_id, user_id, created_at 等高频查询字段建立索引</text>
  
  <text x="600" y="1050" class="field-name">分区策略:</text>
  <text x="680" y="1050" class="endpoint-text">matches 表按时间分区，audit_logs 表按月分区</text>
  
  <text x="600" y="1065" class="field-name">JSONB字段:</text>
  <text x="690" y="1065" class="endpoint-text">用于存储灵活的结构化数据，支持索引和查询</text>
  
</svg>

